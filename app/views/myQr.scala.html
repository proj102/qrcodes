@(custSession: CustomerSession, qr: Qrcode, loginForm: Form[Client], infosType: Int, infosContent: String)

@import helper._
@import helper.twitterBootstrap._

@main("View my QrCode") {

    @header(loginForm, custSession)

	<div class="container">
		@informations(infosType, infosContent)
		<div class="hero-unit">
			<h2>My QrCode</h2>
			<div id="qrcodeCanvas" class="thumbnail"></div>
			<strong>Title</strong> : @qr.getTitle()<br/>
			<strong>Place</strong> : @qr.getPlace()<br/>
			<strong>Redirection</strong> : @qr.getRedirection()<br/>
			<strong>Creation date</strong> : @qr.getCreationDate()<br/>
			<strong>Number of flashs</strong> : @qr.getFlashs()<br/>
			<a href="" id="pngUrl">Save As PNG</a>
		</div>
		<script>jQuery('#qrcodeCanvas').qrcode({text : "@qr.getUrl()"});</script>
		
		
		<!--Script Javascript converting canvas generated by the QRGenerator into PNG, then modifying an <a> tag with a created url to the PNG image-->
				<script type="text/javascript">
			function putImage()
				{
				  var myCanvas = document.getElementsByTagName("canvas");
				  var canvas1 = myCanvas [0];       
				  var ctx = canvas1.getContext("2d");                // Get the context for the canvas.
				  var myImage = canvas1.toDataURL("image/png");      // Get the data as an image.
				
				  var linkElement = document.getElementById("pngUrl");  //Get the a object
				  linkElement.href = myImage;
				  
				} 
			putImage();
				</script>
				
		
		<div class="hero-unit">

			<h2>To modify my QrCode</h2>
			@form(action = routes.MyQr.submit) {
				<input type="hidden" name="id" value="@qr.getId()" />
				@inputText(
					loginForm("redirection"),
					'_label -> "Url of redirection",
					'_help -> "",
					'_error -> "Please choose a valid redirection url."
				)

				@inputText(
					loginForm("title"),
					'_label -> "Qr code's Title",
					'_help -> "",
					'_error -> "Please choose a valid title."
				)

				@inputText(
					loginForm("place"),
					'_label -> "Where is your Qr code",
					'_help -> "",
					'_error -> "Please choose a valid place."
				)
				<input type="submit" class="btn-primary btn-large" value="Modify" />
			}
		</div>

		<div class="span5">
		</div>
	</div>
}
