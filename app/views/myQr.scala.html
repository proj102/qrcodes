@(custSession: CustomerSession, qr: Qrcode, qrForm: Form[Qrcode], infosType: Int, infosContent: String)

@import helper._
@import helper.twitterBootstrap._

@main("View my QrCode") {

    @header(custSession)

	<div class="container">
		@informations(infosType, infosContent)
		<div class="hero-unit">
			<div class="row">
				
				<div class="span12" >
					<h2 style="margin:10px;">My QrCode</h2>
				</div>
				<div class="span5">
					<div id="qrcodeCanvas" class="thumbnail"></div>
				</div>
				<div class="span5" style="font-size:16px;">
					<br />
					<strong>Title</strong> : @qr.getTitle()<br/>
					<strong>Place</strong> : @qr.getPlace()<br/>
					<strong>Redirection</strong> : @qr.getRedirection()<br/>
					<strong>Creation date</strong> : @qr.getCreationDate()<br/>
					<strong>Number of flashs</strong> : @qr.getFlashs()<br/>
					<a href="" id="pngUrl">Save As PNG</a><br/>
				</div>
				<script>jQuery('#qrcodeCanvas').qrcode({text : "@qr.getUrl()"});</script>
				
		
				<!--Script Javascript converting canvas generated by the QRGenerator into PNG, then modifying an <a> tag with a created url to the PNG image-->
				<script type="text/javascript">
					function putImage()
						{
						  var myCanvas = document.getElementsByTagName("canvas");
						  var canvas1 = myCanvas [0];       
						  var ctx = canvas1.getContext("2d");                // Get the context for the canvas.
						  var myImage = canvas1.toDataURL("image/png")      // Get the data as an image.
						
						  var linkElement = document.getElementById("pngUrl");  //Get the a object
						  linkElement.href = myImage;
//						  var uriContent = "data:application/octet-stream," + encodeURIComponent(myImage);
//						  linkElement.href = uriContent;
						} 
					putImage();
				</script>
					
				
				<div class="span12" style="border:">
					<h2 style="margin:10px;">To modify my QrCode</h2>
					@form(action = routes.MyQr.submit) {
						<input type="hidden" name="id" value="@qr.getId()" />
						@inputText(
							qrForm("redirection"),
							'_label -> "Url of redirection",
							'_help -> "",
							'_error -> "Please choose a valid redirection url."
						)

						@inputText(
							qrForm("title"),
							'_label -> "Qr code's Title",
							'_help -> "",
							'_error -> "Please choose a valid title."
						)

						@inputText(
							qrForm("place"),
							'_label -> "Where is your Qr code",
							'_help -> "",
							'_error -> "Please choose a valid place."
						)
						<input type="submit" class="btn-primary btn-large" value="Modify" />
					}
				</div>
			</div>
		</div>

		<div class="span5">
		</div>
	</div>
}
